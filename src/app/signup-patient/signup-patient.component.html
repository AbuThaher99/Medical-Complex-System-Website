<app-custom-alert></app-custom-alert>
<div class="signup-patient-container">
  <div class="signup-header">
    <h2>Patient Registration</h2>
    <p>Please fill out the form below to create your patient account</p>
  </div>

  <form (ngSubmit)="onSubmit()">
    <!-- Personal Information Section -->
    <div class="form-section">
      <h3 class="form-section-title">Personal Information</h3>

      <div class="form-row">
        <div class="form-group">
          <label for="firstName">First Name</label>
          <input
            type="text"
            id="firstName"
            [(ngModel)]="user.firstName"
            name="firstName"
            required
            placeholder="Enter your first name"
          />
        </div>

        <div class="form-group">
          <label for="lastName">Last Name</label>
          <input
            type="text"
            id="lastName"
            [(ngModel)]="user.lastName"
            name="lastName"
            required
            placeholder="Enter your last name"
          />
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="email">Email Address</label>
          <div class="input-with-icon">
            <span class="input-icon">✉️</span>
            <input
              type="email"
              id="email"
              [(ngModel)]="user.email"
              name="email"
              required
              placeholder="example@email.com"
            />
          </div>
          <div class="hint">We'll never share your email with anyone else</div>
        </div>

        <div class="form-group">
          <label for="phone">Phone Number</label>
          <div class="input-with-icon">
            <span class="input-icon">📱</span>
            <input
              type="tel"
              id="phone"
              [(ngModel)]="user.phone"
              name="phone"
              required
              placeholder="(123) 456-7890"
            />
          </div>
        </div>
      </div>

      <div class="form-group full-width">
        <label for="address">Address</label>
        <input
          type="text"
          id="address"
          [(ngModel)]="user.address"
          name="address"
          required
          placeholder="Enter your street address"
        />
      </div>

      <div class="form-group">
        <label for="dateOfBirth">Date of Birth</label>
        <input
          type="date"
          id="dateOfBirth"
          [(ngModel)]="user.dateOfBirth"
          name="dateOfBirth"
          required
          (change)="calculateAge()"
        />
      </div>

      <div class="form-group">
        <label for="password">Password</label>
        <div class="input-with-icon">
          <span class="input-icon">🔒</span>
          <input
            [type]="showPassword ? 'text' : 'password'"
            id="password"
            [(ngModel)]="user.password"
            name="password"
            required
            placeholder="Create a secure password"
            (input)="checkPasswordStrength()"
          />
          <button type="button" class="password-visible-toggle" (click)="togglePasswordVisibility()">
            {{ showPassword ? '🔒' : '👁️' }}
          </button>
        </div>
        <div class="password-strength" [ngClass]="passwordStrengthClass">
          <div class="password-strength-meter"></div>
        </div>
        <div class="hint">Use 8+ characters with a mix of letters, numbers & symbols</div>
      </div>
    </div>

    <!-- Patient Specific Information -->
    <div class="form-section">
      <h3 class="form-section-title">Medical Information</h3>

      <div class="patient-fields">
        <div class="form-row">
          <div class="form-group">
            <label for="age">Age</label>
            <input
              type="number"
              id="age"
              [(ngModel)]="patient.age"
              name="age"
              required
              min="0"
              max="120"
              placeholder="Your current age"
            />
          </div>

          <div class="form-group">
            <label for="bloodType">Blood Type</label>
            <select
              id="bloodType"
              [(ngModel)]="patient.bloodType.id"
              name="bloodType"
              required
            >
              <option value="" disabled selected>Select blood type</option>
              <option value="1">A+</option>
              <option value="2">A-</option>
              <option value="3">B+</option>
              <option value="4">B-</option>
              <option value="5">O+</option>
              <option value="6">O-</option>
              <option value="7">AB+</option>
              <option value="8">AB-</option>
            </select>
          </div>
        </div>
      </div>
    </div>

    <div class="form-group">
      <div class="hint" style="text-align: center; margin-bottom: 1rem;">
        By clicking Create Account, you agree to our Terms of Service and Privacy Policy
      </div>
    </div>

    <!-- Signup Button -->
    <button type="submit" class="submit-button">Create Account</button>
    <button type="button" class="redirect-button" (click)="navigateBasedOnRole()">
      Go back
    </button>
  </form>


</div>
